<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        .section-picker {
            margin-bottom: 20px;
        }

        .question {
            background-color: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .answer {
            background-color: #002F6C;
            color: white;
            padding: 10px;
            margin: 5px 20px;
            border-radius: 8px;
        }

        .email {
            margin-top: 50px;
            text-align: center;
            color: #555;
        }
        #questionsContainer {
            margin-right: 75px; /* –∏–ª–∏ –¥—Ä—É–≥–æ–π –Ω—É–∂–Ω—ã–π –æ—Ç—Å—Ç—É–ø */
        }
        /* –ë–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É */
        .top-right-menu {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }

            .top-right-menu button {
                width: 50px;
                height: 50px;
                border: none;
                border-radius: 50%;
                background-color: #002F6C;
                color: white;
                cursor: pointer;
                font-size: 24px;
                text-align: center;
            }
    </style>
</head>
<body>
    <h1>–ü–æ–¥–¥–µ—Ä–∂–∫–∞</h1>

    <select id="sectionPicker" class="section-picker">
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É...</option>
    </select>

    <div id="questionsContainer"></div>

    <div class="email">
        <p>–ï—Å–ª–∏ –≤—ã –Ω–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º!</p>
        <p>eamelnik_1@edu.hse.ru</p>
        <p>Vdskachko@edu.hse.ru</p>
    </div>
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–µ–Ω—é -->
    <div class="top-right-menu"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // –ß–∏—Ç–∞–µ–º —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—É—é –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
            var userRole = localStorage.getItem('userRole');
            var menuContainer = document.querySelector('.top-right-menu');
            let menuHtml = '';

            if (userRole === '3') {
                // –ú–µ–Ω—é –¥–ª—è —É—á–µ–Ω–∏–∫–∞
                menuHtml = `
                    <button onclick="location.href='/notifications.html'">üîî</button>
                    <button onclick="location.href='/attendance.html'">‚úçÔ∏è</button>
                    <button onclick="location.href='/gradeStudent.html'">üíØ</button>
                    <button onclick="location.href='/scheduleStudent.html'">üìÖ</button>
                    <button style="background-color: lightgrey; color: white;" onclick="location.href='/support.html'">üÜò</button>
                `;
            } else if (userRole === '2') {
                // –ú–µ–Ω—é –¥–ª—è —É—á–∏—Ç–µ–ª—è
                menuHtml = `
                    <button onclick="location.href='/notifications.html'">üîî</button>
                    <button onclick="location.href='/attTeacher.html'">‚úçÔ∏è</button>
                    <button onclick="location.href='/gradeTeacher.html'">üíØ</button>
                    <button onclick="location.href='/scheduleTeacher.html'">üìÖ</button>
                    <button style="background-color: lightgrey; color: white;" onclick="location.href='/support.html'">üÜò</button>
                `;
            } else if (userRole === '4') {
                // –ú–µ–Ω—é –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª—è
                menuHtml = `   
                    <button onclick="location.href='/notifications.html'">üîî</button>
                    <button onclick="location.href='/attParent.html'">‚úç</button>
                    <button onclick="location.href='/gradeParent.html'">üíØ</button>
                    <button onclick="location.href='/scheduleParent.html'">üìÖ</button>
                    <button onclick="location.href='/parentPayments.html'">üí∞</button>
                    <button style="background-color: lightgrey; color: white;" onclick="location.href='/support.html'">üÜò</button>
                `;
            }
            // –ï—Å–ª–∏ —Ä–æ–ª—å –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –º–µ–Ω—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–ª–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
            else {
                menuHtml = `
                    <button onclick="location.href='/notifications.html'">üîî</button>
                    <button onclick="location.href='/support.html'">üÜò</button>
                `;
            }

            menuContainer.innerHTML = menuHtml;
        });
    </script>
    <script>
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞
        fetch('/api/support')
            .then(response => response.json())
            .then(data => {
                const sectionPicker = document.getElementById('sectionPicker');
                const questionsContainer = document.getElementById('questionsContainer');

                // –ó–∞–ø–æ–ª–Ω—è–µ–º –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ —Å–µ–∫—Ü–∏—è–º–∏
                data.sections.forEach(section => {
                    const option = document.createElement('option');
                    option.value = section;
                    option.textContent = section;
                    sectionPicker.appendChild(option);
                });

                // –§–∏–ª—å—Ç—Ä—É–µ–º –≤–æ–ø—Ä–æ—Å—ã –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ–∫—Ü–∏–∏
                sectionPicker.addEventListener('change', () => {
                    const selectedSection = sectionPicker.value;
                    const filteredQuestions = data.questions.filter(q => !selectedSection || q.section === selectedSection);

                    questionsContainer.innerHTML = '';

                    filteredQuestions.forEach(question => {
                        const questionDiv = document.createElement('div');
                        questionDiv.className = 'question';
                        questionDiv.textContent = question.text;

                        const answerDiv = document.createElement('div');
                        answerDiv.className = 'answer';
                        answerDiv.textContent = question.answer;

                        questionsContainer.appendChild(questionDiv);
                        questionsContainer.appendChild(answerDiv);
                    });
                });
            })
            .catch(err => {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', err);
            });
    </script>
</body>
</html>
